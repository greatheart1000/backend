å¥½çš„ï¼Œè¿™æ˜¯ä¸ºä½ ç”Ÿæˆçš„ `README.md` æ–‡ä»¶ã€‚å®ƒåŒ…å«äº†ä½ é¡¹ç›®çš„åŸºç¡€ä¿¡æ¯ã€å¦‚ä½•è¿è¡Œã€ä»¥åŠæ¯ä¸ª API æ¥å£çš„è¯¦ç»†è¯´æ˜å’Œæµ‹è¯•å‘½ä»¤ã€‚

Markdown

```
# Go Fiber & MySQL API æœåŠ¡

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ Go è¯­è¨€çš„ **Fiber** æ¡†æ¶æ„å»ºçš„ Web API æœåŠ¡ï¼Œé›†æˆäº† **MySQL** æ•°æ®åº“ï¼Œå¹¶å®ç°äº†åŸºæœ¬çš„**æƒé™æ§åˆ¶**åŠŸèƒ½ã€‚

---

## ğŸš€ é¡¹ç›®å¯åŠ¨

### 1. å‡†å¤‡å·¥ä½œ

åœ¨è¿è¡Œé¡¹ç›®ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»å®‰è£…äº†ä»¥ä¸‹ç¯å¢ƒï¼š

* **Go** (ç‰ˆæœ¬ 1.18+)
* **MySQL** (ç‰ˆæœ¬ 5.7+)
* **Git**

### 2. æ•°æ®åº“é…ç½®

1.  åˆ›å»ºä¸€ä¸ªåä¸º `testdb` çš„æ•°æ®åº“ï¼š
    ```sql
    CREATE DATABASE testdb;
    ```
2.  è¿›å…¥ `mysql` æ•°æ®åº“å¹¶åˆ›å»º `users` è¡¨ï¼Œç¡®ä¿åŒ…å« `role` å­—æ®µï¼š
    ```sql
    USE testdb;

    CREATE TABLE users (
        id INT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(255) NOT NULL,
        age INT NOT NULL,
        role VARCHAR(50) NOT NULL DEFAULT 'user'
    );
    ```

### 3. å®‰è£…ä¾èµ–

è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Go æ¨¡å—ä¾èµ–ï¼š
```bash
go mod tidy
```



### 4. è¿è¡ŒæœåŠ¡



ç¡®ä¿ä½ çš„ MySQL æ•°æ®åº“æ­£åœ¨è¿è¡Œï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼š

Bash

```
go run main.go
```

æœåŠ¡å°†åœ¨æœ¬åœ°çš„ `3000` ç«¯å£å¯åŠ¨ã€‚

------



## ğŸ’¡ API æ¥å£æ–‡æ¡£



ä»¥ä¸‹æ˜¯æ‰€æœ‰å¯ç”¨çš„ API æ¥å£åŠå…¶æµ‹è¯•å‘½ä»¤ã€‚ä½ å¯ä»¥ä½¿ç”¨ `curl` æˆ– Postman ç­‰å·¥å…·è¿›è¡Œæµ‹è¯•ã€‚



### 1. åŸºç¡€æ¥å£





#### 1.1 `GET /`



- **è¯´æ˜**ï¼šä¸€ä¸ªç®€å•çš„å¥åº·æ£€æŸ¥æ¥å£ã€‚

- **è¯·æ±‚æ–¹æ³•**ï¼š`GET`

- **ç¤ºä¾‹**ï¼š

  Bash

  ```
  curl http://localhost:3000
  ```

- **å“åº”**ï¼š`Hello, World!`



#### 1.2 `GET /api/users/:id`



- **è¯´æ˜**ï¼šé€šè¿‡ ID è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆæ¨¡æ‹Ÿï¼‰ã€‚

- **è¯·æ±‚æ–¹æ³•**ï¼š`GET`

- **å‚æ•°**ï¼š`:id` (ç”¨æˆ·ID)

- **ç¤ºä¾‹**ï¼š

  Bash

  ```
  curl http://localhost:3000/api/users/123
  ```

- **å“åº”**ï¼š`User ID: 123`



#### 1.3 `POST /api/users`



- **è¯´æ˜**ï¼šå¤„ç† JSON æ ¼å¼çš„ç”¨æˆ·æ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰ã€‚

- **è¯·æ±‚æ–¹æ³•**ï¼š`POST`

- **è¯·æ±‚å¤´**ï¼š`Content-Type: application/json`

- **è¯·æ±‚ä½“**ï¼š

  JSON

  ```
  {
    "name": "Alice",
    "age": 30
  }
  ```

- **ç¤ºä¾‹**ï¼š

  Bash

  ```
  curl -X POST http://localhost:3000/api/users \
  -H "Content-Type: application/json" \
  -d '{"name": "Alice", "age": 30}'
  ```

------



### 2. æ•°æ®åº“æ“ä½œä¸æƒé™æ¥å£





#### 2.1 `POST /users`



- **è¯´æ˜**ï¼šæ–°å¢ä¸€ä¸ªç”¨æˆ·åˆ°æ•°æ®åº“ï¼Œæ–°ç”¨æˆ·çš„ `role` å­—æ®µé»˜è®¤ä¸º `user`ã€‚

- **è¯·æ±‚æ–¹æ³•**ï¼š`POST`

- **è¯·æ±‚å¤´**ï¼š`Content-Type: application/json`

- **è¯·æ±‚ä½“**ï¼š

  JSON

  ```
  {
    "name": "Bob",
    "age": 25
  }
  ```

- **ç¤ºä¾‹**ï¼š

  Bash

  ```
  curl -X POST http://localhost:3000/users \
  -H "Content-Type: application/json" \
  -d '{"name": "Bob", "age": 25}'
  ```



#### 2.2 `GET /users`



- **è¯´æ˜**ï¼šæŸ¥è¯¢æ•°æ®åº“ä¸­æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨ã€‚æ­¤æ¥å£**ä»…é™ç®¡ç†å‘˜è®¿é—®**ã€‚

- **è¯·æ±‚æ–¹æ³•**ï¼š`GET`

- **æƒé™**ï¼šéœ€è¦è¯·æ±‚å¤´ `X-User-Role` ä¸º `admin`ã€‚

- **ç¤ºä¾‹**ï¼š

  1. **æ™®é€šç”¨æˆ·è®¿é—® (ä¼šè¢«æ‹’ç»)**ï¼š

     Bash

     ```
     curl http://localhost:3000/users
     ```

     - **å“åº”**ï¼š`{"error":"æ‚¨æ²¡æœ‰æƒé™è®¿é—®æ­¤èµ„æº"}`

  2. **ç®¡ç†å‘˜è®¿é—® (éœ€è¦æ‰‹åŠ¨åœ¨æ•°æ®åº“ä¸­æ’å…¥ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·)**ï¼š

     Bash

     ```
     # æ‰‹åŠ¨æ’å…¥ç®¡ç†å‘˜ç”¨æˆ·
     mysql> INSERT INTO users (name, age, role) VALUES ('AdminUser', 40, 'admin');
     
     # ä½¿ç”¨ curl å‘½ä»¤
     curl -H "X-User-Role: admin" http://localhost:3000/users
     ```

     - **å“åº”**ï¼šæˆåŠŸè¿”å›æ‰€æœ‰ç”¨æˆ·æ•°æ®çš„ JSON æ•°ç»„ã€‚